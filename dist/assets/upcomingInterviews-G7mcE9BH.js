import{r as n,av as x,aw as F,u as V,ax as C,ay as R,c as P,a as K,j as e,az as M}from"./index-DbbjP9G_.js";var d={},c={},m={};Object.defineProperty(m,"__esModule",{value:!0});m.AuthError=void 0;class O extends Error{constructor(i){super(i)}}m.AuthError=O;Object.defineProperty(c,"__esModule",{value:!0});c.default=void 0;c.useReactAuthKit=T;var b=n,S=m;function L(){var r=(0,b.createContext)(null);return r.displayName="ReactAuthKit",r}var _=L();function T(){var r=(0,b.useContext)(_);if(r===null)throw new S.AuthError("Auth Provider is missing. Make sure, you are using this component inside the auth provider.");return r}c.default=_;var p={};Object.defineProperty(p,"__esModule",{value:!0});p.isAuthenticated=$;function $(r){return r.auth?new Date(r.auth.expiresAt)>new Date:!1}Object.defineProperty(d,"__esModule",{value:!0});var j=d.default=void 0,z=c,B=p;function J(){var r=(0,z.useReactAuthKit)(),i=r.value;return(0,B.isAuthenticated)(i)?i.userState:null}j=d.default=J;function G(){const[r,i]=n.useState([]),[D,g]=n.useState(!0),[h,y]=n.useState(""),[u,w]=n.useState(null),f=x(F),I=V(),v=C(),E=x(R),s=j(),o=s.role;n.useEffect(()=>{if(s.role==="interviewee")w(s.uid),console.log("Interviewee data:",s);else if(s.role==="interviewer")w(s.uid),console.log("Interviewer data:",s);else return},[I]),n.useEffect(()=>{o&&u&&U()},[o,u]);const U=async()=>{try{console.log("UserRole:",o),console.log("UserId:",u);const t={interviewer_id:o==="interviewer"?u:null,interviewee_id:o==="interviewee"?u:null};console.log("Payload being sent:",t);const a=`${P.apiBaseUrl}/api/interviewee/getAcceptedInterviews`,l=await K.post(a,t);i(l.data),g(!1)}catch(t){console.error("Error fetching upcoming interviews:",t),y("Failed to load upcoming interviews."),g(!1)}},k=async t=>{console.log(t);let a="",l,N=o;N==="interviewee"?(a="Interviewee",l=t.auth_interviewee):N==="interviewer"&&(a="Interviewer",l=t.auth_interviewer),console.log(t);try{await v.join({userName:a,authToken:l})}catch(A){console.error(A)}};return n.useEffect(()=>{window.onunload=()=>{f&&v.leave()}},[v,f]),D?e.jsxDEV("div",{className:"text-center mt-10",children:"Loading upcoming interviews..."},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:93,columnNumber:12},this):h?e.jsxDEV("div",{className:"text-center mt-10 text-red-500",children:h},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:97,columnNumber:12},this):e.jsxDEV("div",{className:"min-h-screen bg-gray-100 p-4",children:e.jsxDEV("div",{className:"max-w-4xl mx-auto mt-10 p-6 bg-white rounded-md shadow-md",children:[e.jsxDEV("h2",{className:"text-3xl font-semibold text-center mb-8",children:"Upcoming Interviews"},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:103,columnNumber:9},this),r.length===0?e.jsxDEV("p",{className:"text-center",children:"No upcoming interviews scheduled."},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:105,columnNumber:11},this):f?e.jsxDEV("div",{children:e.jsxDEV("div",{className:"peers-container",children:E.map(t=>e.jsxDEV(M,{peer:t},t.id,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:111,columnNumber:19},this))},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:109,columnNumber:15},this)},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:108,columnNumber:13},this):e.jsxDEV("ul",{children:r.map(t=>e.jsxDEV("li",{className:"mb-6 p-4 border rounded-md hover:bg-gray-50 transition",children:e.jsxDEV("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[e.jsxDEV("div",{className:"mb-4 md:mb-0",children:[e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Interviewee ID:"},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:125,columnNumber:25},this)," ",t.interviewee_id]},void 0,!0,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:124,columnNumber:23},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Date:"},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:128,columnNumber:25},this)," ",t.date]},void 0,!0,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:127,columnNumber:23},this),e.jsxDEV("p",{children:[e.jsxDEV("strong",{children:"Time:"},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:131,columnNumber:25},this)," ",t.time]},void 0,!0,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:130,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:123,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>k(t),className:"py-2 px-4 bg-blue-500 text-white font-semibold rounded-md hover:bg-blue-600 transition duration-200",children:"Join Call"},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:134,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:122,columnNumber:19},this)},t._id,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:118,columnNumber:17},this))},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:116,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:102,columnNumber:7},this)},void 0,!1,{fileName:"/Users/yashgupta/Desktop/frontend-fintervue/Fintervue_front_new/src/pages/upcomingInterviews.jsx",lineNumber:101,columnNumber:5},this)}export{G as default};
